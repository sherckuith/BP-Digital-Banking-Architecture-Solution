```mermaid

graph TD
    subgraph Client_Tier [Capa de Cliente]
        App[Mobile App Container<br/>Flutter / Secure Enclave Binding]
        SPA[React SPA Container<br/>TypeScript / Node.js Vite]
    end

    subgraph API_Edge [Perímetro y Seguridad]
        GW[API Gateway Container: Kong<br/>Auth, Rate Limiting, DPoP Validation]
        BFF[BFF Container: Node.js<br/>Agregación de servicios por canal]
    end

    subgraph Microservices [Servicios de Misión Crítica]
        CustSvc[Customer Service Container: Spring Boot<br/>Consolidador de Identidad]
        Onb[Onboarding Service Container: Go<br/>IAL2 Biometry + KYC Logic]
        Txn[Transaction Service Container: Java/Spring<br/>Saga Orchestrator + Outbox Pattern]
        ACL[Anti-Corruption Layer<br/>Adapter REST/SOAP]
        Audit[Audit Service Container: Go<br/>Hash-chaining SHA-256 / WORM]
        Notify[Notification Orchestrator: Node.js<br/>Fallback Logic: WhatsApp > SMS]
    end

    subgraph Persistence_Messaging [Datos y Resiliencia]
        Redis[Cache Container: Redis<br/>Cache-Aside / Latency Mitigation]
        DB[(Aurora Global DB<br/>Transactional Data)]
        Cust360[(Customer-360 DB<br/>Sistema Independiente - Detalle)]
        Kafka{Kafka / MSK Container<br/>Event Bus / 200k TPS Support}
        S3[(S3 Glacier WORM<br/>Auditoría Inmutable - 7 años)]
        Core_Legacy[(Core Bancario Legacy<br/>AS/400 u On-Prem)]
    end

    %% Relaciones
    App & SPA --> GW
    GW --> BFF
    BFF --> Onb & Txn & CustSvc

    %% Conexiones Customer Service (Cumplimiento de 2 sistemas)
    CustSvc --> ACL
    ACL --> Core_Legacy
    CustSvc --> Cust360

    Txn --> Redis
    Txn --> DB
    Txn --> Kafka
    Txn --> ACL

    Kafka --> Audit
    Kafka --> Notify
    
    Audit --> S3

```